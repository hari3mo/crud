{% extends "base.html" %}

{% block title %}Opportunities List{% endblock %}

{% block content %}


    <div class="opportunitiesMenu">  <!-- menu-->

        <a class="btn btn-secondary btn-lg" href="{{ url_for('opportunities') }}" role="button">Back</a>
        <!-- <a class="btn btn-secondary btn-lg" href="{{ url_for('new_opportunity') }}" role="button">New Opportunity</a> -->
        <a class="btn btn-primary btn-lg" href="{{ url_for('opportunities_list') }}" role="button">Refresh</a>
        <a class="btn btn-danger btn-lg" href="{{ url_for('clear_opportunities')}}" role="button">Clear List</a>

    </div>
    <br>
    <h1 class="text-center"><strong><u>Opportunities List</u></strong></h1>
<br>
<table class="table table-striped table-hover">
    <thead>
        <tr>
            <th scope="col">Company Name</th>
            <th scope="col">Lead Name</th>
            <th scope="col">Lead Contact</th>
            <th scope="col">Opportunity</th>
            <th scope="col">Value</th>
            <th scope="col">Stage</th>
            <th scope="col">Creation Date</th>
            <th scope="col">Close Date</th>
        </tr>
    </thead>
    <tbody>
        {% if opportunities %}
        {% for opportunity in opportunities %}
        <tr>
            
            <th scope="row"><a class="link-secondary link-offset-2 link-underline-opacity-25 link-underline-opacity-100-hover" 
                href="{{ url_for('account', id=opportunity.AccountID) }}">{{ opportunity.Account.CompanyName }}</th>
                <td>{{ opportunity.Lead.FirstName }} {{ opportunity.Lead.LastName }}</td>
                <td>{{ opportunity.Lead.Email }}</td>
                <td>{{ opportunity.Opportunity }}</td>
                <td>{{ opportunity.Stage }}</td>
                <td>{{ opportunity.Value }}</td>
                <td>{{ opportunity.CreationDate }}</td>
                <td>{{ opportunity.CloseDate }}</td>
        </tr>
        {% endfor %}
        {% endif %}
</table>

{% endblock %}